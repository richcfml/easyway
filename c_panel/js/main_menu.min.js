function deleteOptionSM(e){var t=document.getElementById(e);$(t).hide();$(t).hide();mText="|"+e.replace("ewo_qc","~");mText=mText.replace("ewo_qc","~");mText=mText.replace("|tr","|");mText=mText.replace(/\//g," ");$("#hdnOptionsSM").val($("#hdnOptionsSM").val().replace(mText,""))}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function emptyFancyBoxFieldsSM(){$("#hdnOptionsSM").val("");$("#chkAttDefSM").attr("checked",false);$("#txtAttSubTitleSM").val("");$("#txtAttPriceSM").val("");$("#rbAttDDSM").attr("checked",true);$("#chkAttAddSM").attr("checked",true);$("#chkAttTotalSM").attr("checked",false);$("#chkAttReqSM").attr("checked",false);$("#chkAttEntireSM").attr("checked",false);$("#txtAttTitleSM").val("");$("#txtAttNameSM").val("");$("#hdnAttributeUpdateSet1").val("");$("#username_availability_resultSM").html("");$("#tblOptionsSM tr:gt(0)").remove();$("#TopHeadingSM").html("Add New Attribute");$("#hdnNameSM").val("");$(".validated_error").css("display","none");$("#span_ChooseSM").text("");$("#span_limitSM").text("");$("#span_attr_nameSM").text("");$("#attr_chooseSM").val("");$("#attr_limitSM").val("");$("#txtLimitExceedSM").val("");$("#hdnAttributesSM").val("");$("#txtLimitExceedSM").hide();$("#chkLimitExceedNoSM").attr("checked","checked")}$(document).ready(function(){$(".tab_content").hide();$(".tab_content:first").show();$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();var e=$(this).attr("rel");$("#"+e).fadeIn()});$("#menu_form").validate({rules:{submenu_name:{required:true}},messages:{submenu_name:{required:"please enter your email address",email:"please enter a valid email address"},description:{required:"please enter your password",minlength:"your enter a valid pa ssword"}},errorElement:"br",errorClass:"alert-error"});$("#mainmenu_form").validate({rules:{txt_menuname:{required:true}},messages:{txt_menuname:{required:"please enter your menu name",email:"please enter a valid menu name"}},errorElement:"br",errorClass:"alert-error"});$("#menu_shuffle_form").validate({rules:{menuname:{required:true}},messages:{menuname:{required:"please enter your menu name",email:"please enter a valid menu name"}},errorElement:"br",errorClass:"alert-error"});$("#RelatedItemLi").click(function(){$("#mainFancyBox").slideDown(500)});$("#menu_ordering","#txtAttPriceSM","#txtLimitExceedSM").keydown(function(e){if($.inArray(e.keyCode,[173,46,8,9,27,13,110,190])!==-1||e.keyCode==65&&e.ctrlKey===true||e.keyCode>=35&&e.keyCode<=39){return}if(e.keyCode!=173){if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}}});$(".loadMenuHours").fancybox({height:"442px",type:"iframe"});$("#btnAddAttributeSM").fancybox({afterClose:function(){emptyFancyBoxFieldsSM()}});$("input[name='chkLimitExceedSM']").change(function(){var e=this.value;if(e==1){$("#txtLimitExceedSM").show()}else{$("#txtLimitExceedSM").hide();$("#spnLimitExceedSM").css("visibility","hidden")}});$("#attr_chooseSM").change(function(){if($("#attr_chooseSM").val()!=""){$("#span_ChooseSM").text($("#attr_chooseSM option:selected").text())}else{$("#span_ChooseSM").text("")}});$("#txtAttNameSM").focusout(function(){if($("#attr_limitSM").text()!=""){$("#span_attr_nameSM").text(" "+$("#txtAttNameSM").val())}else{$("#span_attr_nameSM").text("")}});$("#attr_limitSM").change(function(){$("#span_limitSM").text(" "+$("#attr_limitSM option:selected").text());if($("#attr_limitSM").val()!=""){$("#span_limitSM").text(" up to "+$("#attr_limitSM option:selected").text())}else{$("#span_limitSM").text("")}});$("#btnAddAttrSM").die("click").live("click",function(){if($.trim($("#txtAttSubTitleSM").val())==""||$.trim($("#txtAttSubTitleSM").val())=='Example - "Hot Sause"'){$("#spnTitleReqSM").css("visibility","visible");$("#txtAttSubTitleSM").focus();return}else{$("#spnTitleReqSM").css("visibility","hidden")}var e="NA";if($.trim($("#txtAttPriceSM").val())!=""){if($("#txtAttPriceSM").val().charAt(0)=="."){e="0"+$("#txtAttPriceSM").val()}else{e=$("#txtAttPriceSM").val()}}var t="No";if($("#chkAttDefSM").is(":checked")){t="Yes"}$("#hdnOptionsSM").val($("#hdnOptionsSM").val()+"|"+$("#txtAttSubTitleSM").val()+"~"+e+"~"+t);$("#tblOptionsSM tr:last").after('<tr id="tr'+$("#txtAttSubTitleSM").val().replace(/ /g,"/")+"ewo_qc"+e+"ewo_qc"+t+'"><td style="width: 5%;"></td><td style="width: 50%;" align="left">'+$("#txtAttSubTitleSM").val()+'</td><td style="width: 15%;" align="left">'+e+'</td><td style="width: 15%;" align="left">'+t+'</td><td style="width: 10%;"><img onclick=deleteOptionSM("tr'+$("#txtAttSubTitleSM").val().replace(/ /g,"/")+"ewo_qc"+e+"ewo_qc"+t+'"); class="attRem" src="img/delete_icon2.png" alt="Delete" style="width: 17px;cursor:pointer" data-tooltip="Delete" name="imgAttDelSM" id="imgAttDelSM"/></td><td style="width: 5%;"></td></tr><tr id="2tr'+$("#txtAttSubTitleSM").val()+"ewo_qc"+e+"ewo_qc"+t+'" style="height: 5px;"><td colspan="6"></td></tr>');$("#chkAttDefSM").attr("checked",false);$("#txtAttSubTitleSM").val("");$("#txtAttPriceSM").val("")});$(".option_NameSM").fancybox({afterClose:function(){emptyFancyBoxFieldsSM()}});$("#submenu_name").blur(function(){$("#submenu_name").attr("placeholder","Name")});$("#submenu_name").focus(function(){$("#submenu_name").attr("placeholder","")});$("#description").blur(function(){$("#description").attr("placeholder","Description of Category")});$("#description").focus(function(){$("#description").attr("placeholder","")});$("#txt_menuname").blur(function(){$("#txt_menuname").attr("placeholder","Menu Name")});$("#txt_menuname").focus(function(){$("#txt_menuname").attr("placeholder","")});$("#txt_menudescription").blur(function(){$("#txt_menudescription").attr("placeholder","Menu Description")});$("#txt_menudescription").focus(function(){$("#txt_menudescription").attr("placeholder","")});$("#menuname").blur(function(){$("#menuname").attr("placeholder","Menu Name")});$("#menuname").focus(function(){$("#menuname").attr("placeholder","")});$("#description_menu").blur(function(){$("#description_menu").attr("placeholder","Menu Description")});$("#description_menu").focus(function(){$("#description_menu").attr("placeholder","")});$("#btnSaveSM").die("click").live("click",function(){if($("#attr_chooseSM").val()==""){$("#spnChooseAttrSM").css("visibility","visible");$("#attr_chooseSM").focus();return}if($("#txtAttNameSM").val()==""){$("#spnNameReqSM").css("visibility","visible");$("#txtAttNameSM").focus();return}$("#spnNameReqSM").css("visibility","hidden");if($("#txtAttTitleSM").val()==""){$("#spnAttTitleReqSM").css("visibility","visible");$("#txtAttTitleSM").focus();return}$("#spnAttTitleReqSM").css("visibility","hidden");var e=$("#hdnCatid").val();if(isNaN(e)){subcatid=$("#hdn_subcatid").val()}var t=$("#span_ChooseSM").text()+$("#span_limitSM").text()+$("#span_attr_nameSM").text();var n=$("#txtAttTitleSM").val();var r=$("#attr_chooseSM").val()+"~"+$("#txtAttNameSM").val()+"~"+$("#attr_limitSM").val();var i=1;var s;var o;if($("input[name=chkLimitExceedSM]:radio:checked").val()==1){o=$("#txtLimitExceedSM").val();if(o==""||o==0){$("#spnLimitExceedSM").css("visibility","visible");$("#txtLimitExceedSM").focus();return}}else{o=0}var u=1;if($("#rbAttDDSM").is(":checked")){u=1}else if($("#rbAttCBSM").is(":checked")){u=2}else if($("#rbAttRBSM").is(":checked")){u=3}if($("#chkAttAddSM").is(":checked")){i=1}else if($("#chkAttTotalSM").is(":checked")){i=2}var a=0;if($("#chkAttEntireSM").is(":checked")){a=1}var f=0;if($("#chkAttReqSM").is(":checked")){f=1}mOptionsString=$("#hdnOptionsSM").val();var l=(new Date).getTime();if($("#hdnAttributeUpdateSet1").val()==""){s="admin_contents/menus/menu_ajax.php?AddNewAttributeInCategory=1&SubCatID="+e+"&Name="+t+"&OptionName="+n+"&Layout="+u+"&ApplySubCat="+a+"&Required="+f+"&Title_Price_Defalt="+mOptionsString+"&add_to_price="+i+"&attrFields="+r+"&extraCharger="+o+"&"+l}else if($("#hdnAttributeUpdateSet1").val()!=""){s="admin_contents/menus/menu_ajax.php?UpdateAttributeInCategory=1&SubCatID="+e+"&Name="+t+"&OptionName="+n+"&Layout="+u+"&ApplySubCat="+a+"&Required="+f+"&Title_Price_Defalt="+mOptionsString+"&oldOptionName="+$("#hdnAttributeUpdateSet1").val()+"&add_to_price="+i+"&attrFields="+r+"&extraCharger="+o+"&"+l}$.ajax({url:s,success:function(e){if(isNumber(e)){if($("#hdnAttributesSM").val().indexOf("~"+$("#txtAttTitleSM").val())<0){if($.trim($("#hdnAttributesSM").val())==""){$("#hdnAttributesSM").val(e+"~"+$("#txtAttTitleSM").val()+"~"+$("#txtAttName").val())}else{$("#hdnAttributesSM").val($("#hdnAttributesSM").val()+"|"+e+"~"+$("#txtAttTitleSM").val()+"~"+$("#txtAttName").val())}$("#dvAttributes").html("");mAttributeList=$("#hdnAttributesSM").val().split("|");console.log(mAttributeList);mAttributeList.forEach(function(e){mAttributeData=e.split("~");mAttributeID=mAttributeData[0];mAttributeName=mAttributeData[1];mAttributeN=mAttributeData[2];var n=$("<div><span></div>");n.find("span").attr({option_name:mAttributeName,display_name:t});n.find("span").addClass("attr_delete");n.find("span").text("x");$("#attr_"+$("#hdnAttributeUpdateSet1").val().split(" ").join("")).remove();$("#attr-list").append("<li id='attr_"+mAttributeName.split(" ").join("")+'\' class="liAtribute"><a href="#dvAddAttributeSM" class="option_NameSM" style="margin-top:2px">'+mAttributeName+"</a> "+n.html()+'  <div style="clear:both"></div></li>');$("#addAttributetxt").append($("<option></option>").val(mAttributeN).html(mAttributeName));$("#addAttributetxt").trigger("liszt:updated");if($("#hdnAttributeUpdateSet1").val()==""){var r=parseInt($("#attr_desc").html().split(":").pop());r=r+1;$("#attr_desc").html("Attributes:"+r)}$(".noAttributes").hide();$(".option_NameSM").fancybox({afterClose:function(){emptyFancyBoxFieldsSM()}})})}$("#dvNoAttSM").hide();$.fancybox.close();emptyFancyBoxFieldsSM()}else{}},error:function(e,t,n){alert(e.status);alert(t)}})});$(".option_NameSM").live("click",function(){var e=$(this).text();var t=$("#hdnCatid").val();$("#hdnAttributeUpdateSet1").val(e);if(isNaN(t)){t=$("#hdn_subcatid").val()}$.ajax({type:"POST",url:"admin_contents/menus/menu_ajax.php?GetCategoryAttrbutedataforEdit=1&sub_catid="+t+"&option_name="+e,success:function(e){if(e!=""){var t=jQuery.parseJSON(e);var n="";$("#tblOptionsSM tr:gt(0)").remove();for(var r in t){$("#hdnNameSM").val(t[r]["display_Name"]);$("#txtAttTitleSM").val(t[r]["option_name"]);$("#TopHeadingSM").html("Edit "+t[r]["option_name"]);var i=t[r]["Type"];var s=t[r]["add_to_price"];if(t[r]["attr_name"]!=null){mAttributeArray=t[r]["attr_name"].split("~");$("#txtAttNameSM").val(mAttributeArray[1]);$("#attr_chooseSM").val(mAttributeArray[0]);$("#attr_limitSM").val(mAttributeArray[2]);if(t[r]["extra_charge"]!=""&&t[r]["extra_charge"]!="0"){$("#txtLimitExceedSM").val(t[r]["extra_charge"]);$("#chkLimitExceedYesSM").attr("checked","checked");$("#txtLimitExceedSM").show()}else{$("#chkLimitExceedNoSM").attr("checked","checked")}}else{$("#txtAttNameSM").val(t[r]["display_Name"])}if($("#attr_chooseSM").val()!=""){$("#span_ChooseSM").text($("#attr_chooseSM option:selected").text())}if($("#attr_limitSM").val()!=""){$("#span_limitSM").text(" up to "+$("#attr_limitSM option:selected").text())}$("#span_attr_nameSM").text(" "+$("#txtAttNameSM").val());if(t[r]["Required"]=="1"){$("#chkAttReqSM").prop("checked",true)}if(t[r]["apply_sub_cat"]=="1"){$("#chkAttEntireSM").prop("checked",true)}$('input[type="radio"][name="rbAttSM"][value='+i+"]:first").prop("checked",true);$('input[type="radio"][name="chkAttAddSM"][value='+s+"]:first").prop("checked",true);var o="NA";if($.trim(t[r]["Price"])!=""&&$.trim(t[r]["Price"])!=".75"){o=t[r]["Price"]}var u="No";if(t[r]["Default"]==1){u="Yes"}n=n+"|"+t[r]["Title"]+"~"+o+"~"+u;$("#tblOptionsSM tr:last").after('<tr id="tr'+t[r]["Title"].replace(/ /g,"/")+"ewo_qc"+o+"ewo_qc"+u+'"><td style="width: 5%;"></td><td style="width: 50%;" align="left">'+t[r]["Title"]+'</td><td style="width: 15%;" align="left">'+o+'</td><td style="width: 15%;" align="left">'+u+'</td><td style="width: 10%;"><img onclick=deleteOptionSM("tr'+t[r]["Title"].replace(/ /g,"/")+"ewo_qc"+o+"ewo_qc"+u+'"); class="attRem" src="img/delete_icon2.png" alt="Delete" style="width: 17px;cursor:pointer" data-tooltip="Delete" name="imgAttDelSM" id="imgAttDelSM"/></td><td style="width: 5%;"></td></tr><tr id="2tr'+t[r]["Title"]+"ewo_qc"+o+"ewo_qc"+u+'" style="height: 5px;"><td colspan="6"></td></tr>')}$("#hdnOptionsSM").val(n)}}})});$(".btnCancelSM").click(function(){$("#popup_box").css("display","block")});$("#btnNoSM").click(function(){$("#popup_box").css("display","none");$.fancybox.close();emptyFancyBoxFields()});$("#btnYesSM").click(function(){$("#btnSaveSM").click();$("#popup_box").css("display","none");$(".validated_error").css("display","block");return false})})